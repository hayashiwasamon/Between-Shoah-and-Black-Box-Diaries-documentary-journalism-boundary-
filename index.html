<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>映画批評 | ドキュメンタリーとジャーナリズムの境界</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* フォントと基本設定 */
        body {
            font-family: 'Inter', sans-serif;
            color: #E5E7EB; /* 明るいグレー */
            margin: 0;
            overflow: hidden; /* body自体のスクロールを禁止 */
        }

        h1, h2, h3, .font-serif {
            font-family: 'Noto Serif JP', serif;
        }

        /* --- 背景アニメーション用スタイル --- */
        #animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Canvasを最背面に配置 */
        }
        
        /* --- コンテンツ用コンテナ --- */
        .content-container {
            position: relative;
            z-index: 1; /* コンテンツをCanvasの前面に */
            height: 100vh;
            overflow-y: auto; /* コンテナ内でコンテンツをスクロールさせる */
            scroll-behavior: smooth;
        }
        
        /* 半透明のカードスタイル */
        .card-bg {
            background-color: rgba(17, 24, 39, 0.85); /* Gray-900 85% opacity */
            backdrop-filter: blur(10px);
            --webkit-backdrop-filter: blur(10px);
            border-radius: 0.75rem; /* 少し丸みを強く */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* 比較表のスタイル */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 2rem;
            background-color: rgba(31, 41, 55, 0.7); /* Gray-800 70% opacity */
        }
        .comparison-table th, .comparison-table td {
            border: 1px solid #4B5563; /* Gray-600 */
            padding: 1rem;
            text-align: left;
        }
        .comparison-table th {
            background-color: rgba(55, 65, 81, 0.9); /* Gray-700 90% opacity */
            font-family: 'Noto Serif JP', serif;
            color: #F3F4F6; /* Gray-100 */
        }
        .comparison-table tr > td:first-child {
            font-weight: bold;
            background-color: rgba(55, 65, 81, 0.9); /* Gray-700 90% opacity */
            color: #D1D5DB; /* Gray-300 */
        }
        
        /* チャートコンテナのサイズ調整 */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
    </style>
</head>
<body class="antialiased bg-gray-900">

    <!-- 背景アニメーション用Canvas -->
    <canvas id="animated-bg"></canvas>

    <!-- メインコンテンツ -->
    <div class="content-container">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl py-12 md:py-20">
            
            <header class="text-center mb-12 md:mb-20">
                <h1 class="text-4xl md:text-5xl font-bold mb-3 text-gray-100 tracking-wider">ドキュメンタリーとジャーナリズムの境界</h1>
                <p class="text-xl md:text-2xl text-amber-300 font-serif">『SHOAH ショア』と『Black Box Diaries』のあいだ</p>
            </header>

            <main class="space-y-12">
                <!-- 1. 序論 -->
                <section id="intro" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 font-serif text-amber-300 border-b-2 border-amber-300/50 pb-3">1. 境界線を問いかける二つのまなざし</h2>
                    <div class="space-y-5 text-base md:text-lg leading-relaxed text-gray-300">
                        <p>ドキュメンタリーとジャーナリズム、その境界線はどこにあるのだろうか。この根源的な問いを胸に、私たちは二つの強烈なドキュメンタリー作品と向き合うことになる。クロード・ランズマン監督によるホロコーストの記憶を巡る記念碑的大作『SHOAH ショア』（以下、『ショア』）と、伊藤詩織監督が自らの性被害と司法との闘いを赤裸々に記録した『Black Box Diaries』（以下、『BBD』）である。これらの作品は、それぞれ異なる悲劇とトラウマを扱いながらも、記録映像の倫理、当事者の「声」のありよう、そして作品が社会に投げかける波紋という点で、ドキュメンタリーとジャーナリズムの境界線を鋭く問い直す力を持つ。</p>
                        <p>本稿では、映画監督・作家の森達也が提示するジャーナリズムとドキュメンタリーの区分、そしてドキュメンタリストが背負うべき「覚悟」についての見解、さらにポストコロニアル理論家ガヤトリ・C・スピヴァクが提唱する「サバルタン（声なき者）」の表象の問題と、「真正の歴史家」が「いまだ到来していない“未来の市民”」のために語るという視座を補助線として、この二作品を読み解いていきたい。これらの作品と理論的視座を交差させることで、現代におけるドキュメンタリー映像実践の倫理的・社会的含意を多角的に浮かび上がらせることを試みる。</p>
                    </div>
                </section>

                <!-- 2. 理論のプリズム -->
                <section id="theories" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-8 text-center font-serif text-amber-300">2. 理論のプリズム：森達也とスピヴァクの視点</h2>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="border-l-4 border-cyan-400 pl-6">
                            <h3 class="text-xl font-bold mb-3 font-serif">2.1. 森達也：「作品」と「覚悟」</h3>
                            <div class="space-y-3 text-gray-300 leading-relaxed">
                                <p>映画監督であり作家の森達也は、ジャーナリズムとドキュメンタリーの間に明確な線を引く。彼によれば、「ジャーナリズムは作品ではない。その問題提起と社会への周知に大きな意味がある。でもドキュメンタリーは作品だ」。ジャーナリズムが客観性や中立性を（可能な限り）追求し、情報提供者の保護を絶対視するのに対し、ドキュメンタリーは「自己表現」であり、監督の主観や感情、思いが優先されるべきだと森は主張する。カメラアングルや編集によって現実は必然的に再構築されるため、ドキュメンタリーは「現実の断片を素材にした世界観の再構築」となるのだ。</p>
                                <p>さらに森は、ドキュメンタリストが負うべき倫理的重荷について、「人を傷つける覚悟をしなくてはならない。責任を取れない覚悟をしなくてはならない。後ろめたさや負い目を持ち続けなくてはならない」と語る。この「覚悟」は、対象や社会に対して加害性を持ちうるドキュメンタリー制作の本質的な困難さを示唆しており、特に社会の周縁やタブーに切り込む際に顕著となる。</p>
                            </div>
                        </div>
                        <div class="border-l-4 border-rose-400 pl-6">
                            <h3 class="text-xl font-bold mb-3 font-serif">2.2. スピヴァク：「サバルタン」と「真正の歴史家」</h3>
                            <div class="space-y-3 text-gray-300 leading-relaxed">
                                <p>ポストコロニアル理論家ガヤトリ・C・スピヴァクは、「サバルタンは語ることができるか (Can the Subaltern Speak?)」という根源的な問いを投げかけたことで知られる。サバルタンとは、社会構造の中で周縁化され、自らの声を歴史や公的言説の中に届けることができない「従属的な立場にある個人や集団」を指す。スピヴァクによれば、知識人やエリートがサバルタンを「代弁 (representation)」しようとする試みは、しばしばその声を歪めたり、支配的な言説構造の中に回収してしまったりする危険性を孕む。</p>
                                <p>この文脈で、スピヴァクは「真正の歴史家」という概念に触れる。それは、声なき者の代弁者として、いまだ到来していない「未来の市民」の視点から歴史を語りうる存在として構想される。この「真正の歴史家」は、サバルタンの声を掬い上げようとする困難な営為の中で、既存の歴史記述の限界を認識しつつ、未来に向けた倫理的な応答可能性を探る存在と言えるだろう。</p>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- 3. ケーススタディ1：SHOAH ショア -->
                <section id="shoah" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 font-serif text-cyan-300 border-b-2 border-cyan-300/50 pb-3">3. ケーススタディ1：クロード・ランズマン監督『SHOAH ショア』</h2>
                    <div class="space-y-6 text-base leading-relaxed text-gray-300">
                        <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">記憶を現在に呼び覚ます制作背景と方法論</h3>
                            <p>約9時間半に及ぶ長編ドキュメンタリー『ショア』の最大の特徴は、ホロコーストに関する過去の記録映像を一切使用せず、生存者、加害者、そして傍観者たちの「現在」の証言のみで構成されている点である。ランズマンは、アーカイブ映像の使用は真実を歪めると考えた。撮影は、絶滅収容所の跡地などで当時の状況を想起させるように行われ、過去の出来事を現在に蘇らせ、観客に強烈な体験を強いる。</p>
                        </div>
                         <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">森達也の視点：「作品」としての歴史叙述と「覚悟」</h3>
                            <p>森達也の定義に従えば、『ショア』は紛れもなく「作品」である。同時に、この作品は森の言う「覚悟」を制作者に強いる。例えば、床屋であったアブラハム・ボンバが、ガス室へ送られる人々の髪を切った体験を語る中で精神的に追い詰められ、撮影の中断を懇願する場面がある。ランズマンは、それでも証言を続けるよう促す。これは、証言者に過去のトラウマを再体験させるという倫理的ジレンマを伴うが、歴史の真実を記録し後世に伝えるという「責任を取れない覚悟」の表れとも解釈できる。</p>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">スピヴァクの視点：声なき声を「未来の市民」へ</h3>
                            <p>ガス室で殺害された何百万もの人々は、もはや自ら語ることができない究極のサバルタンである。ランズマンは、生存者の証言を通じて、これらの「溺れし者、沈められし者、抹殺されし者」の代わりに、いわば「代理として」語らせようとする。この意味で、ランズマンはスピヴァクの言う「真正の歴史家」の役割を担おうとしていると見ることができる。</p>
                        </div>
                         <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">ドキュメンタリーとジャーナリズムの境界</h3>
                            <p>『ショア』は、ジャーナリズム的な真実探求とドキュメンタリー映画の芸術的表現が分かちがたく結びついた稀有な例であり、「倫理的感性が最も力強い形で美的選択を決定するノンフィクションの記念碑的作品」と評される。この作品は、ドキュメンタリーが歴史的証言であると同時に、強烈な美的体験を伴う芸術作品たりうることを示している。</p>
                        </div>
                    </div>
                </section>

                <!-- 4. ケーススタディ2：Black Box Diaries -->
                <section id="bbd" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 font-serif text-rose-300 border-b-2 border-rose-300/50 pb-3">4. ケーススタディ2：伊藤詩織監督『Black Box Diaries』</h2>
                     <div class="space-y-6 text-base leading-relaxed text-gray-300">
                        <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">個人的な闘いの記録と告発</h3>
                            <p>ジャーナリストである伊藤詩織は、著名ジャーナリストからの性暴力被害を告発し、その後の困難な道のりを自ら記録した。『BBD』は、一人称の視点、ビデオダイアリー、隠し録音、CGによる再現など、多様な手法を駆使して構成されている。この制作手法は、深刻な倫理的論争を引き起こした。特に、無断録音・使用や、監視カメラ映像（CG再現）の使用は、「公益性」の主張と相まって複雑な問題を提起する。</p>
                        </div>
                         <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">森達也の視点：「自己表現」としての告発と「覚悟」</h3>
                            <p>森達也のドキュメンタリー観に照らせば、『BBD』は伊藤監督自身の「自己表現」であり、個人的な体験と感情が色濃く反映された「作品」であると言える。自らのトラウマを公に晒す行為は、精神的な「傷」を伴い、社会からのバッシングに直面することも、森の言う「責任を取れない覚悟」の一環と見なせるかもしれない。</p>
                        </div>
                        <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">スピヴァクの視点：サバルタンは語りうるか？</h3>
                            <p>家父長制的な社会構造の中でサバルタン的な状況に置かれたと言える伊藤は、映画を通して自らの「声」を直接的に発信する。彼女は、自身の経験に関する「真正の歴史家」としての役割を担おうとしている。しかし、伊藤に対する激しいバックラッシュは、サバルタンの声が支配的な言説構造から完全に自由になることの困難さを物語っている。</p>
                        </div>
                         <div>
                            <h3 class="text-lg font-bold mb-2 font-serif">ドキュメンタリーとジャーナリズムの境界</h3>
                            <p>『BBD』はその核心において伊藤個人の物語であるが、同時にジャーナリストとしての手法を用い、事件を明らかにしようとする。さらに、社会変革と法改正を求める明確な行動喚起であり、政治的介入としての性格も帯びる。提示される「真実」は強力だが、それは語られた真実なのである。</p>
                        </div>
                    </div>
                </section>
                
                <!-- 5. 統合的考察 -->
                <section id="analysis" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 font-serif text-amber-300 border-b-2 border-amber-300/50 pb-3">5. 統合的考察</h2>
                     <div class="space-y-5 text-base md:text-lg leading-relaxed text-gray-300 mb-10">
                        <p>『ショア』と『BBD』の比較から明らかになるのは、ドキュメンタリーとジャーナリズムの「境界」が静的な線ではなく、動的なインターフェースであるという点である。各々の映画監督が、その目的、倫理観、そして追求する「真実」の性質に基づいて、この境界を異なる形で交渉する。『ショア』は歴史的・ジャーナリズム的目的のために芸術的手段を用い、『BBD』は個人的・芸術的表現および政治的変革のためにジャーナリズム的手段を用いる。したがって、この「境界」は、積極的な構築と論争の場なのである。</p>
                        <p>両作品を巡る倫理的論争は、証言し真実を暴露する責務（「公益性」、歴史的記録）と、関与する個人に対する倫理的義務との間の、和解不可能な緊張関係を浮き彫りにする。この「境界」は倫理的な地雷原なのである。</p>
                    </div>

                    <h3 class="text-xl md:text-2xl font-bold mb-4 text-center font-serif">5.5. 視覚的サマリー：作品特性の比較</h3>
                    <div class="chart-container mb-12">
                        <canvas id="comparisonChart"></canvas>
                    </div>
                    
                    <h3 class="text-xl md:text-2xl font-bold mb-4 text-center font-serif">5.5. 比較分析表</h3>
                    <div class="overflow-x-auto">
                        <table class="comparison-table">
                           <thead>
                                <tr>
                                    <th>比較項目</th>
                                    <th>SHOAH ショア</th>
                                    <th>Black Box Diaries</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>監督と背景</td><td>クロード・ランズマン（ジャーナリスト、歴史家）</td><td>伊藤詩織（ジャーナリスト、性被害サバイバー）</td></tr>
                                <tr><td>主要主題</td><td>ホロコースト（ユダヤ人大量虐殺）</td><td>伊藤詩織監督自身の性被害告発と司法闘争</td></tr>
                                <tr><td>中心的制作方法</td><td>アーカイブ映像なし、現在の場所での証言（生存者、加害者、傍観者）</td><td>一人称ナラティブ、ビデオダイアリー、隠し録音、CGによる監視カメラ映像再現</td></tr>
                                <tr><td>主要な倫理的課題</td><td>証言者の再トラウマ化、監督の権力性、通訳の問題</td><td>同意、情報源の秘匿、公益性とプライバシーの衝突</td></tr>
                                <tr><td>森達也氏の分類（仮説）</td><td>ジャーナリズム的インパクトを持つ「作品」</td><td>個人的・政治的介入としての「作品」</td></tr>
                                <tr><td>森達也氏の「覚悟」の顕在化</td><td>歴史的記録と数百万人の記憶への責任、証言者への負荷</td><td>自己の人生、司法制度、他の被害者への影響、手法の倫理的リスク</td></tr>
                                <tr><td>スピヴァク的表象のレンズ</td><td>死者の「代理」としての発話、歴史的ナラティブの限界</td><td>サバルタンは語りうるか？言説的権力への挑戦</td></tr>
                                <tr><td>「ジャーナリズム」との関連</td><td>調査的要素、真実伝達、社会的インパクト</td><td>調査プロセス、アドボカシー・ジャーナリズム</td></tr>
                                <tr><td>「作品」としてのドキュメンタリー</td><td>美的構築、作者のヴィジョン</td><td>個人的ナラティブ、感情の軌跡、映像制作技術</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- 6. 結論 -->
                <section id="conclusion" class="card-bg p-6 md:p-8">
                    <h2 class="text-2xl md:text-3xl font-bold mb-6 font-serif text-amber-300 border-b-2 border-amber-300/50 pb-3">6. 結論：「未来の市民」のための表象の倫理に向けて</h2>
                    <div class="space-y-5 text-base md:text-lg leading-relaxed text-gray-300">
                        <p>『ショア』と『Black Box Diaries』。二つの作品は、それぞれの仕方で、ドキュメンタリーとジャーナリズムの境界線上で格闘する作り手の姿を映し出す。それは、真実を希求するジャーナリスティックな精神と、世界を独自の視点で切り取るドキュメンタリー作家の魂との間で揺れ動く、スリリングな綱渡りにも似ている。</p>
                        <p>真実、トラウマ、そして周縁化された人々の声を倫理的に表象するという課題は、依然としてドキュメンタリー制作者にとって大きな挑戦である。森の言う「覚悟」は、このような困難な領域に踏み込む者にとって不可欠な倫理的スタンスであり続けるだろう。同時に、スピヴァクが示す表象の複雑性と、サバルタンに「純粋な」声を与えることのほぼ不可能性についての警告は、制作者が自らの位置性とナラティブの限界を常に批判的に意識する必要性を強調する。</p>
                        <p>「未来の市民」という概念は、ドキュメンタリーとジャーナリズムの境界で生み出される作品の倫理的・社会的価値を判断するための、一つの灯台となるかもしれない。最良の作品とは、その不完全さや倫理的妥協にもかかわらず、未来においてより情報に基づき、共感的で、批判的に関与する市民を育成することに最も効果的に貢献するものであろう。</p>
                        <p>最終的な倫理的尺度は、そのような作品が、物語を語ることと世界を変えることの間の困難な空間を航行しつつも、批判的省察、共感、そして正義へのコミットメントをどの程度育むかにあるのかもしれない。この境界における真実の追求は、技術だけでなく、深遠な倫理的再帰性と、語られる物語とそれが影響を与える人々に対する深い責任感を、常にその「未来の市民」――いつの日か完全に耳を傾けるかもしれない存在――を視野に入れながら、要求するのである。</p>
                    </div>
                </section>
            </main>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- Chart.js Setup ---
    const ctx = document.getElementById('comparisonChart').getContext('2d');
    const comparisonChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['作家性', 'ジャーナリズム性', '主観性', '社会的インパクト', '倫理的複雑性'],
            datasets: [{
                label: 'SHOAH ショア',
                data: [9, 8, 4, 9, 8],
                backgroundColor: 'rgba(56, 189, 248, 0.2)', // Sky-400
                borderColor: 'rgba(56, 189, 248, 1)',
                pointBackgroundColor: 'rgba(56, 189, 248, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(56, 189, 248, 1)'
            }, {
                label: 'Black Box Diaries',
                data: [7, 7, 9, 8, 9],
                backgroundColor: 'rgba(244, 114, 182, 0.2)', // Pink-400
                borderColor: 'rgba(244, 114, 182, 1)',
                pointBackgroundColor: 'rgba(244, 114, 182, 1)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgba(244, 114, 182, 1)'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                r: {
                    angleLines: { color: 'rgba(255, 255, 255, 0.2)' },
                    grid: { color: 'rgba(255, 255, 255, 0.2)' },
                    pointLabels: {
                        font: { size: 12, family: "'Inter', sans-serif" },
                        color: '#D1D5DB' // Gray-300
                    },
                    ticks: {
                        backdropColor: 'rgba(17, 24, 39, 0.8)',
                        color: '#9CA3AF' // Gray-400
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top',
                    labels: {
                        font: { size: 14, family: "'Inter', sans-serif" },
                        color: '#F3F4F6' // Gray-100
                    }
                },
                tooltip: {
                    bodyFont: { family: "'Inter', sans-serif" },
                    titleFont: { family: "'Inter', sans-serif" }
                }
            }
        }
    });
});
</script>

<script>
    // --- 背景アニメーション用スクリプト ---
    class Vector {
        constructor(x = 0, y = 0) { this.x = x; this.y = y; }
        add(v) { this.x += v.x; this.y += v.y; return this; }
        sub(v) { this.x -= v.x; this.y -= v.y; return this; }
        mult(s) { this.x *= s; this.y *= s; return this; }
        div(s) { if (s !== 0) { this.x /= s; this.y /= s; } return this; }
        mag() { return Math.sqrt(this.x * this.x + this.y * this.y); }
        normalize() { const m = this.mag(); if (m > 0) { this.div(m); } return this; }
        limit(max) { if (this.mag() > max) { this.normalize().mult(max); } return this; }
        static sub(v1, v2) { return new Vector(v1.x - v2.x, v1.y - v2.y); }
        static dist(v1, v2) { const dx = v1.x - v2.x; const dy = v1.y - v2.y; return Math.sqrt(dx * dx + dy * dy); }
    }

    class Boid {
        constructor(x, y, settings) {
            this.settings = settings;
            this.position = new Vector(x, y);
            this.velocity = new Vector(Math.random() * 2 - 1, Math.random() * 2 - 1);
            this.velocity.normalize().mult(Math.random() * (this.settings.speedLimit / 2) + (this.settings.speedLimit / 2));
            this.acceleration = new Vector();
            this.maxForce = 0.2;
            this.assignColor();
        }
        
        assignColor() {
            const colors = ['#0ea5e9', '#ec4899', '#f59e0b', '#84cc16']; // sky-500, pink-500, amber-500, lime-500
            this.color = colors[Math.floor(Math.random() * colors.length)];
        }

        edges() {
            if (this.position.x > window.innerWidth) this.position.x = 0;
            else if (this.position.x < 0) this.position.x = window.innerWidth;
            if (this.position.y > window.innerHeight) this.position.y = 0;
            else if (this.position.y < 0) this.position.y = window.innerHeight;
        }

        applyForce(force) { this.acceleration.add(force); }

        flock(boids) {
            let separationForce = new Vector();
            let alignmentForce = new Vector();
            let cohesionForce = new Vector();
            let totalSeparation = 0, totalAlignment = 0, totalCohesion = 0;
            const separationRadius = this.settings.separation;
            const perceptionRadius = 50;

            for (let other of boids) {
                if (other === this) continue;
                let d = Vector.dist(this.position, other.position);
                if (d > 0 && d < separationRadius) {
                    let diff = Vector.sub(this.position, other.position);
                    diff.normalize().div(d);
                    separationForce.add(diff);
                    totalSeparation++;
                }
                if (d > 0 && d < perceptionRadius) {
                    alignmentForce.add(other.velocity);
                    totalAlignment++;
                    cohesionForce.add(other.position);
                    totalCohesion++;
                }
            }

            if (totalSeparation > 0) {
                separationForce.div(totalSeparation).normalize().mult(this.settings.speedLimit).sub(this.velocity).limit(this.maxForce).mult(this.settings.separationFactor);
            }
            if (totalAlignment > 0) {
                alignmentForce.div(totalAlignment).normalize().mult(this.settings.speedLimit).sub(this.velocity).limit(this.maxForce).mult(this.settings.alignmentFactor);
            }
            if (totalCohesion > 0) {
                cohesionForce.div(totalCohesion).sub(this.position).normalize().mult(this.settings.speedLimit).sub(this.velocity).limit(this.maxForce).mult(this.settings.cohesionFactor);
            }
            
            this.applyForce(separationForce);
            this.applyForce(alignmentForce);
            this.applyForce(cohesionForce);
        }

        update() {
            this.velocity.add(this.acceleration).limit(this.settings.speedLimit);
            this.position.add(this.velocity);
            this.acceleration.mult(0);
            this.edges();
        }

        draw(ctx) {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.position.x, this.position.y, this.settings.birdSize, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    const canvas = document.getElementById('animated-bg');
    const ctx_bg = canvas.getContext('2d');
    let flock = [];

    const settings = {
        backgroundColor: '#030712', // gray-950
        backgroundAlpha: 0.2,
        quantity: 100,
        birdSize: 2,
        speedLimit: 2,
        separation: 25,
        separationFactor: 1.5,
        alignmentFactor: 1.0,
        cohesionFactor: 1.0,
    };
    
    function hexToRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }

    function resetFlock() {
        flock = [];
        for (let i = 0; i < settings.quantity; i++) {
            flock.push(new Boid(Math.random() * canvas.width, Math.random() * canvas.height, settings));
        }
    }

    function animate() {
        ctx_bg.fillStyle = hexToRgba(settings.backgroundColor, settings.backgroundAlpha);
        ctx_bg.fillRect(0, 0, canvas.width, canvas.height);

        flock.forEach(boid => {
            boid.flock(flock);
            boid.update();
            boid.draw(ctx_bg);
        });

        requestAnimationFrame(animate);
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
    resetFlock();
    animate();
</script>

</body>
</html>
